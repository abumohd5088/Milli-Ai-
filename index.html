<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Milli AI School Assistant</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4285f4;
            --secondary-color: #34a853;
            --background-light: #f5f5f5;
            --background-dark: #121212;
            --card-light: #ffffff;
            --card-dark: #1e1e1e;
            --text-light: #333333;
            --text-dark: #e0e0e0;
            --accent: #ea4335;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            background-color: var(--background-light);
            color: var(--text-light);
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background-color: var(--background-dark);
            color: var(--text-dark);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        body.dark-mode header {
            border-bottom: 1px solid #333333;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 24px;
            color: var(--text-light);
        }

        body.dark-mode .theme-toggle {
            color: var(--text-dark);
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .welcome-section {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .welcome-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .welcome-text {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .start-chat-btn {
            background-color: white;
            color: var(--primary-color);
            border: none;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .start-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .chat-container {
            display: none;
            flex-direction: column;
            background-color: var(--card-light);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        body.dark-mode .chat-container {
            background-color: var(--card-dark);
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: var(--primary-color);
            color: white;
        }

        .chat-title {
            font-size: 18px;
            font-weight: bold;
        }

        .chat-menu-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 24px;
        }

        .chat-menu {
            position: absolute;
            top: 60px;
            right: 20px;
            background-color: var(--card-light);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 10px 0;
            min-width: 150px;
            z-index: 100;
            display: none;
        }

        body.dark-mode .chat-menu {
            background-color: var(--card-dark);
        }

        .chat-menu-item {
            padding: 10px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-menu-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        body.dark-mode .chat-menu-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            height: 400px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--primary-color);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .ai-message {
            align-self: flex-start;
            background-color: var(--card-light);
            color: var(--text-light);
            border-bottom-left-radius: 4px;
        }

        body.dark-mode .ai-message {
            background-color: var(--card-dark);
            color: var(--text-dark);
        }

        .chat-input-container {
            display: flex;
            padding: 15px;
            background-color: var(--card-light);
            border-top: 1px solid #e0e0e0;
        }

        body.dark-mode .chat-input-container {
            background-color: var(--card-dark);
            border-top: 1px solid #333333;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 24px;
            font-size: 16px;
            outline: none;
        }

        body.dark-mode .chat-input {
            background-color: var(--card-dark);
            color: var(--text-dark);
            border-color: #333333;
        }

        .send-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tool-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .tool-btn {
            background-color: var(--card-light);
            border: 1px solid #e0e0e0;
            color: var(--text-light);
            padding: 8px 12px;
            border-radius: 18px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        body.dark-mode .tool-btn {
            background-color: var(--card-dark);
            color: var(--text-dark);
            border-color: #333333;
        }

        .suggestions-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background-color: var(--card-light);
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .suggestions-container {
            background-color: var(--card-dark);
        }

        .suggestion-chip {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 16px;
            border-radius: 18px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .suggestion-chip:hover {
            background-color: #3367d6;
        }

        .top-questions {
            background-color: var(--card-light);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .top-questions {
            background-color: var(--card-dark);
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .question-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .question-item {
            padding: 12px 16px;
            background-color: rgba(66, 133, 244, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        body.dark-mode .question-item {
            background-color: rgba(66, 133, 244, 0.2);
        }

        .question-item:hover {
            background-color: rgba(66, 133, 244, 0.2);
        }

        body.dark-mode .question-item:hover {
            background-color: rgba(66, 133, 244, 0.3);
        }

        .notification-center {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 300px;
            max-height: 400px;
            background-color: var(--card-light);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 15px;
            z-index: 1000;
            display: none;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
        }

        body.dark-mode .notification-center {
            background-color: var(--card-dark);
        }

        .notification-item {
            padding: 12px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        body.dark-mode .notification-item {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .notification-icon {
            font-size: 20px;
            color: var(--primary-color);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .notification-time {
            font-size: 12px;
            opacity: 0.7;
        }

        .notification-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--accent);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .maintenance-page {
            display: none;
            text-align: center;
            padding: 60px 20px;
            background-color: var(--card-light);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .maintenance-page {
            background-color: var(--card-dark);
        }

        .maintenance-icon {
            font-size: 64px;
            color: var(--accent);
            margin-bottom: 20px;
        }

        .maintenance-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .maintenance-message {
            font-size: 18px;
            margin-bottom: 30px;
            color: var(--text-light);
        }

        body.dark-mode .maintenance-message {
            color: var(--text-dark);
        }

        .settings-panel {
            background-color: var(--card-light);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        body.dark-mode .settings-panel {
            background-color: var(--card-dark);
        }

        .settings-section {
            margin-bottom: 30px;
        }

        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        body.dark-mode .settings-row {
            border-bottom: 1px solid #333333;
        }

        .settings-label {
            font-size: 16px;
            font-weight: 500;
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .gallery-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .gallery-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            display: block;
        }

        .gallery-download {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--card-light);
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        body.dark-mode .modal-content {
            background-color: var(--card-dark);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
        }

        body.dark-mode .close-modal {
            color: var(--text-dark);
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            border: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-secondary {
            background-color: #e0e0e0;
            color: var(--text-light);
        }

        body.dark-mode .btn-secondary {
            background-color: #333333;
            color: var(--text-dark);
        }

        .btn-danger {
            background-color: var(--accent);
            color: white;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .welcome-section {
                padding: 30px 15px;
            }
            
            .welcome-text {
                font-size: 20px;
            }
            
            .chat-messages {
                height: 300px;
            }
            
            .notification-center {
                width: 280px;
                top: 70px;
            }
            
            .image-gallery {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .gallery-image {
                height: 120px;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 10px 0;
            }
            
            .welcome-section {
                padding: 20px 10px;
            }
            
            .welcome-text {
                font-size: 18px;
            }
            
            .chat-messages {
                height: 250px;
            }
            
            .notification-center {
                width: 260px;
            }
            
            .image-gallery {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <span class="material-icons">school</span>
                <span>Milli AI</span>
            </div>
            <button class="theme-toggle material-icons" id="themeToggle">dark_mode</button>
        </header>

        <!-- Maintenance Page -->
        <div class="maintenance-page" id="maintenancePage">
            <div class="maintenance-icon material-icons">construction</div>
            <h2 class="maintenance-title">System Maintenance</h2>
            <p class="maintenance-message">We're currently performing scheduled maintenance. Please check back soon.</p>
            <button class="start-chat-btn" id="maintenanceBackBtn">Back to Home</button>
        </div>

        <!-- Welcome Section -->
        <div class="welcome-section" id="welcomeSection">
            <div class="welcome-icon material-icons">smart_toy</div>
            <h1 class="welcome-text" id="greetingText">Good Morning. I am Milli AI. Ask me anything about study...</h1>
            <button class="start-chat-btn" id="startChatBtn">Start New Chat</button>
        </div>

        <!-- Chat Container -->
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <div class="chat-title" id="chatTitle">New Chat</div>
                <button class="chat-menu-btn material-icons" id="chatMenuBtn">more_vert</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will be added here dynamically -->
            </div>
            <div class="suggestions-container" id="suggestionsContainer">
                <div class="suggestion-chip" data-suggestion="Summarize this topic">Summarize</div>
                <div class="suggestion-chip" data-suggestion="Explain in simple terms">Explain</div>
                <div class="suggestion-chip" data-suggestion="Generate an image about this">Generate Image</div>
                <div class="suggestion-chip" data-suggestion="Create a quiz on this topic">Quiz</div>
                <div class="suggestion-chip" data-suggestion="Give me study tips">Study Tips</div>
            </div>
            <div class="tool-buttons">
                <button class="tool-btn material-icons" title="Upload File">attach_file</button>
                <button class="tool-btn material-icons" title="Upload Image">image</button>
                <button class="tool-btn material-icons" title="Voice Input">mic</button>
                <button class="tool-btn" id="generateImageButton">Generate Image</button>
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your question...">
                <button class="send-btn material-icons" id="sendBtn">send</button>
            </div>
        </div>

        <!-- Top Questions Section -->
        <div class="top-questions">
            <h2 class="section-title">Top 10 Most Asked Questions</h2>
            <div class="question-list" id="topQuestionsList">
                <!-- Questions will be populated here -->
            </div>
        </div>

        <!-- Settings Panel -->
        <div class="settings-panel">
            <h2 class="section-title">Settings</h2>
            <div class="settings-section">
                <div class="settings-row">
                    <span class="settings-label">Language</span>
                    <select id="languageSelect">
                        <option value="en">English</option>
                        <option value="hi">Hindi</option>
                    </select>
                </div>
                <div class="settings-row">
                    <span class="settings-label">Theme</span>
                    <select id="themeSelect">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>
                <div class="settings-row">
                    <span class="settings-label">Notifications</span>
                    <label class="switch">
                        <input type="checkbox" id="notificationsToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="settings-section">
                <h3 class="settings-label">About Developer</h3>
                <p><strong>Name:</strong> Abutalha</p>
                <p><strong>Class:</strong> 6, Milli Karwaan Public School Balrampur</p>
                <p><strong>Contact:</strong> 9839469669</p>
                <p><em>Young developer with passion for AI & innovation</em></p>
            </div>
            <div class="settings-section">
                <h3 class="settings-label">About School</h3>
                <p><strong>School:</strong> Milli Karwaan Public School Balrampur (MKPS)</p>
                <p><strong>Address:</strong> Baluha Police Chowki, Balrampur, Uttar Pradesh</p>
                <p><strong>Contact:</strong> 9758919151</p>
            </div>
            <div class="settings-section">
                <div class="settings-row">
                    <span class="settings-label">Terms & Conditions</span>
                    <button class="btn btn-secondary" id="termsBtn">View</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Center -->
    <div class="notification-center" id="notificationCenter">
        <h3 class="section-title">Notifications</h3>
        <div id="notificationsList">
            <!-- Notifications will be added here -->
        </div>
    </div>
    <div class="notification-badge" id="notificationBadge" style="display: none;">0</div>

    <!-- Chat Menu -->
    <div class="chat-menu" id="chatMenu">
        <div class="chat-menu-item" id="renameChat">
            <span class="material-icons">edit</span>
            <span>Rename</span>
        </div>
        <div class="chat-menu-item" id="deleteChat">
            <span class="material-icons">delete</span>
            <span>Delete</span>
        </div>
    </div>

    <!-- Image Gallery Modal -->
    <div class="modal" id="imageGalleryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Generated Images</h3>
                <button class="close-modal material-icons" id="closeGalleryModal">close</button>
            </div>
            <div class="modal-body">
                <div class="image-gallery" id="imageGallery">
                    <!-- Images will be added here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeGalleryBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- Rename Chat Modal -->
    <div class="modal" id="renameModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Rename Chat</h3>
                <button class="close-modal material-icons" id="closeRenameModal">close</button>
            </div>
            <div class="modal-body">
                <input type="text" id="newChatName" class="chat-input" placeholder="Enter new chat name...">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelRename">Cancel</button>
                <button class="btn btn-primary" id="confirmRename">Save</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Delete Chat</h3>
                <button class="close-modal material-icons" id="closeDeleteModal">close</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this chat? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDelete">Cancel</button>
                <button class="btn btn-danger" id="confirmDelete">Delete</button>
            </div>
        </div>
    </div>

    <!-- Terms & Conditions Modal -->
    <div class="modal" id="termsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Terms & Conditions</h3>
                <button class="close-modal material-icons" id="closeTermsModal">close</button>
            </div>
            <div class="modal-body">
                <h4>Terms of Use for Milli AI School Assistant</h4>
                <p>By using Milli AI School Assistant, you agree to the following terms:</p>
                <ol>
                    <li>This service is provided for educational purposes only.</li>
                    <li>All content generated by the AI should be verified for accuracy.</li>
                    <li>Do not use this service to generate inappropriate content.</li>
                    <li>The developer is not responsible for any misuse of the service.</li>
                    <li>Content generated may be stored for improvement purposes.</li>
                    <li>By using this service, you consent to receive educational notifications.</li>
                </ol>
                <h4>Privacy Policy</h4>
                <p>Your privacy is important to us:</p>
                <ul>
                    <li>We collect minimal personal data required for authentication.</li>
                    <li>Chat history is stored securely and only accessible to you.</li>
                    <li>We do not share your data with third parties.</li>
                    <li>You can request deletion of your data at any time.</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="acceptTerms">I Accept</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const welcomeSection = document.getElementById('welcomeSection');
        const chatContainer = document.getElementById('chatContainer');
        const startChatBtn = document.getElementById('startChatBtn');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatMenuBtn = document.getElementById('chatMenuBtn');
        const chatMenu = document.getElementById('chatMenu');
        const renameChat = document.getElementById('renameChat');
        const deleteChat = document.getElementById('deleteChat');
        const notificationCenter = document.getElementById('notificationCenter');
        const notificationBadge = document.getElementById('notificationBadge');
        const notificationsList = document.getElementById('notificationsList');
        const maintenancePage = document.getElementById('maintenancePage');
        const maintenanceBackBtn = document.getElementById('maintenanceBackBtn');
        const greetingText = document.getElementById('greetingText');
        const topQuestionsList = document.getElementById('topQuestionsList');
        const generateImageButton = document.getElementById('generateImageButton');
        const imageGalleryModal = document.getElementById('imageGalleryModal');
        const closeGalleryModal = document.getElementById('closeGalleryModal');
        const closeGalleryBtn = document.getElementById('closeGalleryBtn');
        const imageGallery = document.getElementById('imageGallery');
        const renameModal = document.getElementById('renameModal');
        const closeRenameModal = document.getElementById('closeRenameModal');
        const newChatName = document.getElementById('newChatName');
        const cancelRename = document.getElementById('cancelRename');
        const confirmRename = document.getElementById('confirmRename');
        const deleteModal = document.getElementById('deleteModal');
        const closeDeleteModal = document.getElementById('closeDeleteModal');
        const cancelDelete = document.getElementById('cancelDelete');
        const confirmDelete = document.getElementById('confirmDelete');
        const termsModal = document.getElementById('termsModal');
        const termsBtn = document.getElementById('termsBtn');
        const closeTermsModal = document.getElementById('closeTermsModal');
        const acceptTerms = document.getElementById('acceptTerms');
        const languageSelect = document.getElementById('languageSelect');
        const themeSelect = document.getElementById('themeSelect');
        const notificationsToggle = document.getElementById('notificationsToggle');
        const chatTitle = document.getElementById('chatTitle');

        // Mock data
        let currentChatId = null;
        let chats = [];
        let notifications = [];
        let isMaintenanceMode = false;
        let topQuestions = [
            "What is photosynthesis?",
            "How to solve quadratic equations?",
            "Explain Newton's laws of motion",
            "What are the causes of World War I?",
            "How does the water cycle work?",
            "What is the periodic table?",
            "Explain the process of digestion",
            "What are prime numbers?",
            "How to write a good essay?",
            "What is climate change?"
        ];

        // Initialize the app
        function initApp() {
            // Set greeting based on time
            setGreeting();
            
            // Load mock top questions
            loadTopQuestions();
            
            // Load mock notifications
            loadMockNotifications();
            
            // Check for maintenance mode (mock)
            checkMaintenanceMode();
            
            // Event listeners
            setupEventListeners();
            
            // Initialize theme
            initTheme();
        }

        // Set greeting based on time of day
        function setGreeting() {
            const hour = new Date().getHours();
            let greeting = "";
            
            if (hour < 12) {
                greeting = "Good Morning. I am Milli AI. Ask me anything about study...";
            } else if (hour < 17) {
                greeting = "Good Afternoon. I am Milli AI. Ask me anything about study...";
            } else {
                greeting = "Good Evening. I am Milli AI. Ask me anything about study...";
            }
            
            greetingText.textContent = greeting;
        }

        // Load top questions
        function loadTopQuestions() {
            topQuestionsList.innerHTML = '';
            topQuestions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'question-item';
                questionItem.textContent = `${index + 1}. ${question}`;
                questionItem.addEventListener('click', () => {
                    startNewChat();
                    simulateUserMessage(question);
                });
                topQuestionsList.appendChild(questionItem);
            });
        }

        // Load mock notifications
        function loadMockNotifications() {
            notifications = [
                {
                    id: 1,
                    title: "New Feature",
                    message: "Image generation is now available!",
                    time: "2 hours ago",
                    read: false
                },
                {
                    id: 2,
                    title: "System Update",
                    message: "Scheduled maintenance tonight at 10 PM.",
                    time: "1 day ago",
                    read: true
                },
                {
                    id: 3,
                    title: "Study Tip",
                    message: "Try using the 'Summarize' suggestion for complex topics.",
                    time: "3 days ago",
                    read: true
                }
            ];
            
            updateNotifications();
        }

        // Update notifications display
        function updateNotifications() {
            notificationsList.innerHTML = '';
            
            if (notifications.length === 0) {
                notificationsList.innerHTML = '<p>No notifications</p>';
                notificationBadge.style.display = 'none';
                return;
            }
            
            const unreadCount = notifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                notificationBadge.textContent = unreadCount;
                notificationBadge.style.display = 'flex';
            } else {
                notificationBadge.style.display = 'none';
            }
            
            notifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = 'notification-item';
                if (!notification.read) {
                    notificationItem.style.backgroundColor = 'rgba(66, 133, 244, 0.2)';
                }
                
                notificationItem.innerHTML = `
                    <span class="material-icons notification-icon">notifications</span>
                    <div class="notification-content">
                        <div class="notification-title">${notification.title}</div>
                        <div>${notification.message}</div>
                        <div class="notification-time">${notification.time}</div>
                    </div>
                `;
                
                notificationItem.addEventListener('click', () => {
                    notification.read = true;
                    updateNotifications();
                });
                
                notificationsList.appendChild(notificationItem);
            });
        }

        // Check maintenance mode (mock implementation)
        function checkMaintenanceMode() {
            // In a real app, this would check Firestore
            // For demo purposes, we'll use a mock value
            isMaintenanceMode = false; // Set to true to show maintenance page
            
            if (isMaintenanceMode) {
                showMaintenancePage();
            }
        }

        // Show maintenance page
        function showMaintenancePage() {
            welcomeSection.style.display = 'none';
            chatContainer.style.display = 'none';
            maintenancePage.style.display = 'block';
        }

        // Hide maintenance page
        function hideMaintenancePage() {
            maintenancePage.style.display = 'none';
            welcomeSection.style.display = 'block';
        }

        // Start a new chat
        function startNewChat() {
            welcomeSection.style.display = 'none';
            chatContainer.style.display = 'flex';
            chatMessages.innerHTML = '';
            currentChatId = Date.now().toString();
            chatTitle.textContent = 'New Chat';
            
            // Add welcome message
            addAIMessage("Hello! I'm Milli AI, your school assistant. How can I help you with your studies today?");
        }

        // Add a user message
        function addUserMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Add an AI message
        function addAIMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai-message';
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Simulate AI response (mock)
        function simulateAIResponse(userMessage) {
            // Mock responses based on user input
            let response = "";
            
            if (userMessage.toLowerCase().includes("hello") || userMessage.toLowerCase().includes("hi")) {
                response = "Hello! How can I help you with your studies today?";
            } else if (userMessage.toLowerCase().includes("thank")) {
                response = "You're welcome! Let me know if you need any more help.";
            } else if (userMessage.toLowerCase().includes("bye")) {
                response = "Goodbye! Come back anytime you need help with your studies.";
            } else if (userMessage.toLowerCase().includes("help")) {
                response = "I can help you with homework, explain concepts, generate study materials, and more. Try using the suggestion chips above for quick help!";
            } else if (userMessage.toLowerCase().includes("summarize")) {
                response = "I'd be happy to summarize a topic for you. Please tell me which topic you'd like me to summarize.";
            } else if (userMessage.toLowerCase().includes("explain")) {
                response = "I can explain any concept in simple terms. What would you like me to explain?";
            } else if (userMessage.toLowerCase().includes("image")) {
                response = "I can generate images to help you understand concepts better. What kind of image would you like me to generate?";
            } else if (userMessage.toLowerCase().includes("quiz")) {
                response = "Let's test your knowledge! I'll create a short quiz on this topic. Here are 3 questions to get started...";
            } else {
                // Generic response
                response = "That's an interesting question! Based on my knowledge, I can tell you that this is an important concept in your studies. Let me break it down for you in simple terms...";
            }
            
            // Simulate typing delay
            setTimeout(() => {
                addAIMessage(response);
            }, 1000);
        }

        // Simulate user message for demo
        function simulateUserMessage(message) {
            addUserMessage(message);
            simulateAIResponse(message);
        }

        // Generate image using Stable Horde API (mock)
        async function generateImage(prompt) {
            addAIMessage("Generating image based on your request...");
            
            try {
                // In a real app, this would call the Stable Horde API
                // For demo, we'll use placeholder images
                
                setTimeout(() => {
                    const imageUrl = `https://placehold.co/512x512/4285f4/ffffff?text=${encodeURIComponent(prompt.substring(0, 20))}`;
                    addAIMessage("Here's the generated image:");
                    
                    const imageDiv = document.createElement('div');
                    imageDiv.style.textAlign = 'center';
                    imageDiv.style.margin = '15px 0';
                    
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.style.maxWidth = '100%';
                    img.style.borderRadius = '8px';
                    img.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.2)';
                    
                    const downloadBtn = document.createElement('button');
                    downloadBtn.className = 'btn btn-primary';
                    downloadBtn.style.marginTop = '10px';
                    downloadBtn.textContent = 'Download Image';
                    downloadBtn.onclick = () => {
                        const link = document.createElement('a');
                        link.href = imageUrl;
                        link.download = 'milli-ai-image.jpg';
                        link.click();
                    };
                    
                    imageDiv.appendChild(img);
                    imageDiv.appendChild(downloadBtn);
                    chatMessages.appendChild(imageDiv);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Add to gallery
                    addToImageGallery(imageUrl, prompt);
                    
                }, 3000);
                
            } catch (error) {
                addAIMessage("Sorry, I couldn't generate the image. Please try again later.");
                console.error("Image generation error:", error);
            }
        }

        // Add image to gallery
        function addToImageGallery(imageUrl, prompt) {
            const galleryItem = document.createElement('div');
            galleryItem.className = 'gallery-item';
            
            const img = document.createElement('img');
            img.src = imageUrl;
            img.alt = prompt;
            img.className = 'gallery-image';
            
            const downloadBtn = document.createElement('button');
            downloadBtn.className = 'gallery-download material-icons';
            downloadBtn.textContent = 'download';
            downloadBtn.onclick = () => {
                const link = document.createElement('a');
                link.href = imageUrl;
                link.download = 'milli-ai-image.jpg';
                link.click();
            };
            
            galleryItem.appendChild(img);
            galleryItem.appendChild(downloadBtn);
            imageGallery.appendChild(galleryItem);
        }

        // Rename current chat
        function renameCurrentChat(newName) {
            if (currentChatId && newName.trim()) {
                chatTitle.textContent = newName;
                // In a real app, this would update Firestore
                console.log("Renamed chat to:", newName);
            }
        }

        // Delete current chat
        function deleteCurrentChat() {
            if (currentChatId) {
                // In a real app, this would delete from Firestore
                console.log("Deleted chat:", currentChatId);
                currentChatId = null;
                chatContainer.style.display = 'none';
                welcomeSection.style.display = 'block';
            }
        }

        // Toggle theme
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            themeToggle.textContent = isDarkMode ? 'light_mode' : 'dark_mode';
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('darkMode') === 'true';
            if (savedTheme) {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = 'light_mode';
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Start chat button
            startChatBtn.addEventListener('click', startNewChat);
            
            // Send message
            sendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Chat menu
            chatMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                chatMenu.style.display = chatMenu.style.display === 'block' ? 'none' : 'block';
            });
            
            // Hide menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!chatMenuBtn.contains(e.target) && !chatMenu.contains(e.target)) {
                    chatMenu.style.display = 'none';
                }
            });
            
            // Rename chat
            renameChat.addEventListener('click', () => {
                chatMenu.style.display = 'none';
                newChatName.value = chatTitle.textContent;
                renameModal.style.display = 'flex';
            });
            
            // Delete chat
            deleteChat.addEventListener('click', () => {
                chatMenu.style.display = 'none';
                deleteModal.style.display = 'flex';
            });
            
            // Close modals
            closeRenameModal.addEventListener('click', () => {
                renameModal.style.display = 'none';
            });
            
            closeDeleteModal.addEventListener('click', () => {
                deleteModal.style.display = 'none';
            });
            
            closeGalleryModal.addEventListener('click', () => {
                imageGalleryModal.style.display = 'none';
            });
            
            closeGalleryBtn.addEventListener('click', () => {
                imageGalleryModal.style.display = 'none';
            });
            
            closeTermsModal.addEventListener('click', () => {
                termsModal.style.display = 'none';
            });
            
            // Confirm rename
            confirmRename.addEventListener('click', () => {
                renameCurrentChat(newChatName.value);
                renameModal.style.display = 'none';
            });
            
            cancelRename.addEventListener('click', () => {
                renameModal.style.display = 'none';
            });
            
            // Confirm delete
            confirmDelete.addEventListener('click', () => {
                deleteCurrentChat();
                deleteModal.style.display = 'none';
            });
            
            cancelDelete.addEventListener('click', () => {
                deleteModal.style.display = 'none';
            });
            
            // Terms & Conditions
            termsBtn.addEventListener('click', () => {
                termsModal.style.display = 'flex';
            });
            
            acceptTerms.addEventListener('click', () => {
                termsModal.style.display = 'none';
            });
            
            // Generate image button
            generateImageButton.addEventListener('click', () => {
                const prompt = "Educational concept related to your query";
                generateImage(prompt);
                imageGalleryModal.style.display = 'flex';
            });
            
            // Maintenance back button
            maintenanceBackBtn.addEventListener('click', hideMaintenancePage);
            
            // Language select
            languageSelect.addEventListener('change', (e) => {
                // In a real app, this would change the language
                alert(`Language changed to ${e.target.value === 'en' ? 'English' : 'Hindi'}`);
            });
            
            // Theme select
            themeSelect.addEventListener('change', (e) => {
                if (e.target.value === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeToggle.textContent = 'light_mode';
                } else {
                    document.body.classList.remove('dark-mode');
                    themeToggle.textContent = 'dark_mode';
                }
                localStorage.setItem('darkMode', e.target.value === 'dark');
            });
            
            // Notifications toggle
            notificationsToggle.addEventListener('change', (e) => {
                if (e.target.checked) {
                    // Request notification permission
                    if (Notification && Notification.permission !== "granted") {
                        Notification.requestPermission();
                    }
                    alert("Notifications enabled");
                } else {
                    alert("Notifications disabled");
                }
            });
            
            // Show notification center when clicking notification badge
            notificationBadge.addEventListener('click', () => {
                notificationCenter.style.display = notificationCenter.style.display === 'flex' ? 'none' : 'flex';
            });
        }

        // Send message function
        function sendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                addUserMessage(message);
                chatInput.value = '';
                simulateAIResponse(message);
                
                // Check if message contains image generation request
                if (message.toLowerCase().includes("image") || message.toLowerCase().includes("picture") || message.toLowerCase().includes("generate")) {
                    generateImage(message);
                }
            }
        }

        // Handle suggestion chips
        document.querySelectorAll('.suggestion-chip').forEach(chip => {
            chip.addEventListener('click', () => {
                const suggestion = chip.getAttribute('data-suggestion');
                chatInput.value = suggestion;
                chatInput.focus();
            });
        });

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
