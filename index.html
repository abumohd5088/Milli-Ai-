<!DOCTYPE html>
<html lang="hi" id="htmlRoot">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Milli AI - School Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4338ca;
            --secondary-color: #6366f1;
            --background-color: #f9fafb;
            --card-color: #ffffff;
            --text-color: #1f2937;
            --border-color: #e5e7eb;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
        }

        .dark-theme {
            --primary-color: #6366f1;
            --secondary-color: #818cf8;
            --background-color: #111827;
            --card-color: #1f2937;
            --text-color: #f9fafb;
            --border-color: #374151;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .logo i {
            font-size: 2rem;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 1.5rem;
        }

        .menu-button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 1.5rem;
        }

        .chat-container {
            flex: 1;
            display: flex;
            gap: 20px;
            height: calc(100vh - 200px);
        }

        .sidebar {
            width: 280px;
            background-color: var(--card-color);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px var(--shadow-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .new-chat-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            transition: background-color 0.2s;
        }

        .new-chat-btn:hover {
            background-color: var(--secondary-color);
        }

        .chat-list {
            flex: 1;
            overflow-y: auto;
        }

        .chat-item {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-item:hover {
            background-color: var(--border-color);
        }

        .chat-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .chat-actions {
            display: flex;
            gap: 8px;
        }

        .chat-actions button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 0.875rem;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .chat-actions button:hover {
            opacity: 1;
        }

        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: var(--card-color);
            border-radius: 12px;
            box-shadow: 0 4px 6px var(--shadow-color);
            overflow: hidden;
        }

        .chat-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 80%;
            padding: 16px;
            border-radius: 12px;
            position: relative;
        }

        .user-message {
            background-color: var(--primary-color);
            color: white;
            align-self: flex-end;
        }

        .ai-message {
            background-color: var(--card-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            align-self: flex-start;
        }

        .message-options {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .message:hover .message-options {
            opacity: 1;
        }

        .message-options button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 0.875rem;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .message-options button:hover {
            background-color: var(--border-color);
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 16px;
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            align-self: flex-start;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--text-color);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-5px);
            }
        }

        .input-container {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 12px;
            align-items: center;
            background-color: var(--card-color);
        }

        .input-actions {
            display: flex;
            gap: 8px;
        }

        .action-button {
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
            color: var(--text-color);
        }

        .action-button:hover {
            background-color: var(--border-color);
        }

        .message-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 24px;
            font-size: 1rem;
            background-color: var(--card-color);
            color: var(--text-color);
            outline: none;
            transition: border-color 0.2s;
        }

        .message-input:focus {
            border-color: var(--primary-color);
        }

        .send-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .send-button:hover {
            background-color: var(--secondary-color);
        }

        .suggestions {
            padding: 16px 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .suggestion-chip {
            background-color: var(--border-color);
            color: var(--text-color);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .suggestion-chip:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .notification-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 320px;
            max-height: 400px;
            background-color: var(--card-color);
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow-color);
            padding: 16px;
            z-index: 1000;
            display: none;
            flex-direction: column;
            overflow-y: auto;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .notification-close {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 1.25rem;
        }

        .notification-item {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            background-color: var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .notification-item:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .notification-item.unread {
            border-left: 4px solid var(--primary-color);
        }

        .settings-panel {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 320px;
            background-color: var(--card-color);
            box-shadow: -4px 0 12px var(--shadow-color);
            padding: 20px;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        .settings-panel.active {
            transform: translateX(0);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-close {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 1.5rem;
        }

        .settings-section {
            margin-bottom: 30px;
        }

        .settings-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-option:last-child {
            border-bottom: none;
        }

        .settings-label {
            font-weight: 500;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border-color);
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .maintenance-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--background-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            display: none;
        }

        .maintenance-icon {
            font-size: 4rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .maintenance-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .maintenance-message {
            text-align: center;
            max-width: 500px;
            line-height: 1.6;
        }

        .greeting-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--background-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeOut 1s 3s forwards;
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; display: none; }
        }

        .greeting-icon {
            font-size: 6rem;
            color: var(--primary-color);
            margin-bottom: 30px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .greeting-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-align: center;
        }

        .greeting-subtitle {
            font-size: 1.125rem;
            text-align: center;
            max-width: 500px;
            line-height: 1.6;
        }

        .top-questions {
            margin-top: 20px;
            padding: 20px;
            background-color: var(--card-color);
            border-radius: 12px;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        .top-questions-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .top-question-item {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 8px;
            background-color: var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .top-question-item:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .language-switcher {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .language-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--card-color);
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .language-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .image-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        .image-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            display: block;
        }

        .image-actions {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px;
            display: flex;
            justify-content: space-between;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .image-item:hover .image-actions {
            opacity: 1;
        }

        .image-actions button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1rem;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--card-color);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 10px var(--shadow-color);
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-color);
            text-decoration: none;
            font-size: 0.75rem;
            transition: color 0.2s;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-icon {
            font-size: 1.25rem;
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--error-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .chat-container {
                flex-direction: column;
                height: auto;
            }

            .sidebar {
                width: 100%;
                height: 200px;
            }

            .main-chat {
                height: calc(100vh - 400px);
            }

            .notification-panel {
                width: 100%;
                left: 0;
                right: 0;
            }

            .settings-panel {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            header {
                padding: 10px 0;
            }

            .logo {
                font-size: 1.25rem;
            }

            .logo i {
                font-size: 1.5rem;
            }

            .input-container {
                padding: 10px;
            }

            .message-input {
                padding: 8px 12px;
            }

            .action-button, .send-button {
                width: 36px;
                height: 36px;
            }
        }
    </style>
</head>
<body>
    <div class="greeting-screen" id="greetingScreen">
        <i class="material-icons greeting-icon">school</i>
        <h1 class="greeting-title" id="greetingTitle">Good Morning ✨</h1>
        <p class="greeting-subtitle">Ask me anything about study</p>
    </div>

    <div class="maintenance-screen" id="maintenanceScreen">
        <i class="material-icons maintenance-icon">construction</i>
        <h2 class="maintenance-title">App Under Maintenance</h2>
        <p class="maintenance-message">We are currently performing maintenance. Please check back soon!</p>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <i class="material-icons">auto_awesome</i>
                <span>Milli AI</span>
            </div>
            <div class="header-actions">
                <button class="theme-toggle" id="themeToggle">
                    <i class="material-icons">dark_mode</i>
                </button>
                <button class="menu-button" id="menuButton">
                    <i class="material-icons">more_vert</i>
                </button>
            </div>
        </header>

        <div class="chat-container">
            <div class="sidebar">
                <button class="new-chat-btn" id="newChatBtn">
                    <i class="material-icons">add</i>
                    New Chat
                </button>
                <div class="chat-list" id="chatList">
                    <!-- Chat items will be added here dynamically -->
                </div>
            </div>

            <div class="main-chat">
                <div class="chat-header">
                    <h2 class="chat-title" id="chatTitle">New Chat</h2>
                    <div class="chat-actions">
                        <button class="chat-action-btn" id="renameChatBtn">
                            <i class="material-icons">edit</i>
                        </button>
                        <button class="chat-action-btn" id="deleteChatBtn">
                            <i class="material-icons">delete</i>
                        </button>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be added here dynamically -->
                </div>

                <div class="suggestions" id="suggestions">
                    <!-- Suggestions will be added here dynamically -->
                </div>

                <div class="input-container">
                    <div class="input-actions">
                        <button class="action-button" id="micButton" title="Voice Input">
                            <i class="material-icons">mic</i>
                        </button>
                        <button class="action-button" id="fileButton" title="Upload File">
                            <i class="material-icons">attach_file</i>
                        </button>
                        <button class="action-button" id="imageButton" title="Generate Image">
                            <i class="material-icons">image</i>
                        </button>
                    </div>
                    <input type="text" class="message-input" id="messageInput" placeholder="Type your question here..." autocomplete="off">
                    <button class="send-button" id="sendButton">
                        <i class="material-icons">send</i>
                    </button>
                </div>
            </div>
        </div>

        <div class="top-questions" id="topQuestions">
            <h3 class="top-questions-title">
                <i class="material-icons">trending_up</i>
                Top 10 Most Asked Questions
            </h3>
            <div id="topQuestionsList">
                <!-- Top questions will be added here dynamically -->
            </div>
        </div>
    </div>

    <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
            <h3>Notifications</h3>
            <button class="notification-close" id="notificationClose">
                <i class="material-icons">close</i>
            </button>
        </div>
        <div id="notificationList">
            <!-- Notifications will be added here dynamically -->
        </div>
    </div>

    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <h3>Settings</h3>
            <button class="settings-close" id="settingsClose">
                <i class="material-icons">close</i>
            </button>
        </div>

        <div class="settings-section">
            <h4 class="settings-title">Appearance</h4>
            <div class="settings-option">
                <span class="settings-label">Dark Mode</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <div class="settings-section">
            <h4 class="settings-title">Language</h4>
            <div class="language-switcher">
                <button class="language-btn active" id="englishBtn">English</button>
                <button class="language-btn" id="hindiBtn">हिंदी</button>
            </div>
        </div>

        <div class="settings-section">
            <h4 class="settings-title">About</h4>
            <div class="settings-option">
                <span class="settings-label">About Developer</span>
                <i class="material-icons">chevron_right</i>
            </div>
            <div class="settings-option">
                <span class="settings-label">About School</span>
                <i class="material-icons">chevron_right</i>
            </div>
            <div class="settings-option">
                <span class="settings-label">Terms & Conditions</span>
                <i class="material-icons">chevron_right</i>
            </div>
        </div>

        <div class="settings-section">
            <h4 class="settings-title">Account</h4>
            <div class="settings-option">
                <span class="settings-label">Logout</span>
                <i class="material-icons">logout</i>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <a href="#" class="nav-item active">
            <i class="material-icons nav-icon">chat</i>
            <span>Chat</span>
        </a>
        <a href="#" class="nav-item" id="notificationNav">
            <i class="material-icons nav-icon">notifications</i>
            <span>Alerts</span>
            <div class="badge" id="notificationBadge" style="display: none;">0</div>
        </a>
        <a href="#" class="nav-item">
            <i class="material-icons nav-icon">history</i>
            <span>History</span>
        </a>
        <a href="#" class="nav-item" id="settingsNav">
            <i class="material-icons nav-icon">settings</i>
            <span>Settings</span>
        </a>
    </div>

    <script>
        // DOM Elements
        const htmlRoot = document.getElementById('htmlRoot');
        const themeToggle = document.getElementById('themeToggle');
        const menuButton = document.getElementById('menuButton');
        const newChatBtn = document.getElementById('newChatBtn');
        const chatList = document.getElementById('chatList');
        const chatTitle = document.getElementById('chatTitle');
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const micButton = document.getElementById('micButton');
        const fileButton = document.getElementById('fileButton');
        const imageButton = document.getElementById('imageButton');
        const suggestions = document.getElementById('suggestions');
        const topQuestionsList = document.getElementById('topQuestionsList');
        const notificationPanel = document.getElementById('notificationPanel');
        const notificationClose = document.getElementById('notificationClose');
        const notificationNav = document.getElementById('notificationNav');
        const notificationBadge = document.getElementById('notificationBadge');
        const settingsPanel = document.getElementById('settingsPanel');
        const settingsClose = document.getElementById('settingsClose');
        const settingsNav = document.getElementById('settingsNav');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const englishBtn = document.getElementById('englishBtn');
        const hindiBtn = document.getElementById('hindiBtn');
        const greetingScreen = document.getElementById('greetingScreen');
        const greetingTitle = document.getElementById('greetingTitle');
        const maintenanceScreen = document.getElementById('maintenanceScreen');

        // App State
        let currentChatId = null;
        let chats = [];
        let notifications = [];
        let isDarkMode = false;
        let currentLanguage = 'en';
        let isMaintenanceMode = false;

        // Mock Data
        const mockTopQuestions = [
            "What is photosynthesis?",
            "Explain Newton's laws of motion",
            "What are the types of triangles?",
            "How to solve quadratic equations?",
            "What is the water cycle?",
            "Explain the human digestive system",
            "What are the parts of a plant?",
            "How does a computer work?",
            "What is the solar system?",
            "Explain the concept of gravity"
        ];

        const mockSuggestions = [
            "Can you explain this in simpler terms?",
            "Give me an example",
            "What are the applications of this concept?",
            "Can you create a diagram for this?"
        ];

        // Initialize App
        function initApp() {
            // Set greeting based on time
            setGreeting();

            // Load mock data
            loadTopQuestions();
            loadMockChats();

            // Set up event listeners
            setupEventListeners();

            // Check for maintenance mode (mock)
            checkMaintenanceMode();

            // Simulate notifications
            simulateNotifications();
        }

        // Set greeting based on time of day
        function setGreeting() {
            const hour = new Date().getHours();
            let greeting = '';
            
            if (hour < 12) {
                greeting = 'Good Morning ✨';
            } else if (hour < 17) {
                greeting = 'Good Afternoon ✨';
            } else {
                greeting = 'Good Evening ✨';
            }
            
            greetingTitle.textContent = greeting;
        }

        // Load top questions
        function loadTopQuestions() {
            topQuestionsList.innerHTML = '';
            mockTopQuestions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'top-question-item';
                questionItem.textContent = `${index + 1}. ${question}`;
                questionItem.addEventListener('click', () => {
                    messageInput.value = question;
                    messageInput.focus();
                });
                topQuestionsList.appendChild(questionItem);
            });
        }

        // Load mock chats
        function loadMockChats() {
            // Create a sample chat
            const sampleChat = {
                id: 'chat1',
                title: 'Science Questions',
                messages: [
                    {
                        id: 'msg1',
                        type: 'user',
                        content: 'What is photosynthesis?',
                        timestamp: new Date().toLocaleString()
                    },
                    {
                        id: 'msg2',
                        type: 'ai',
                        content: 'Photosynthesis is the process by which green plants and some other organisms use sunlight to synthesize foods with the help of chlorophyll pigments. During this process, carbon dioxide and water are converted into glucose and oxygen. The chemical equation for photosynthesis is: 6CO₂ + 6H₂O + light energy → C₆H₁₂O₆ + 6O₂.',
                        timestamp: new Date().toLocaleString(),
                        options: ['regenerate', 'copy', 'like', 'dislike']
                    }
                ]
            };

            chats.push(sampleChat);
            renderChatList();
            
            // Set current chat to the sample chat
            setCurrentChat(sampleChat.id);
        }

        // Render chat list
        function renderChatList() {
            chatList.innerHTML = '';
            chats.forEach(chat => {
                const chatItem = document.createElement('div');
                chatItem.className = `chat-item ${chat.id === currentChatId ? 'active' : ''}`;
                chatItem.innerHTML = `
                    <span>${chat.title}</span>
                    <div class="chat-actions">
                        <button class="rename-chat" data-id="${chat.id}">
                            <i class="material-icons">edit</i>
                        </button>
                        <button class="delete-chat" data-id="${chat.id}">
                            <i class="material-icons">delete</i>
                        </button>
                    </div>
                `;
                chatItem.addEventListener('click', (e) => {
                    if (!e.target.closest('.chat-actions')) {
                        setCurrentChat(chat.id);
                    }
                });
                chatList.appendChild(chatItem);
            });

            // Add event listeners for rename and delete buttons
            document.querySelectorAll('.rename-chat').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const chatId = e.target.closest('.rename-chat').dataset.id;
                    renameChat(chatId);
                });
            });

            document.querySelectorAll('.delete-chat').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const chatId = e.target.closest('.delete-chat').dataset.id;
                    deleteChat(chatId);
                });
            });
        }

        // Set current chat
        function setCurrentChat(chatId) {
            currentChatId = chatId;
            const chat = chats.find(c => c.id === chatId);
            
            if (chat) {
                chatTitle.textContent = chat.title;
                renderMessages(chat.messages);
                renderSuggestions();
            }
            
            // Update active state in chat list
            document.querySelectorAll('.chat-item').forEach(item => {
                if (item.querySelector('.chat-actions button').dataset.id === chatId) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        // Render messages
        function renderMessages(messages) {
            chatMessages.innerHTML = '';
            messages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${message.type}-message`;
                messageElement.innerHTML = `
                    <div>${message.content}</div>
                    ${message.type === 'ai' ? `
                        <div class="message-options">
                            <button class="regenerate-btn" title="Regenerate">
                                <i class="material-icons">refresh</i>
                            </button>
                            <button class="copy-btn" title="Copy">
                                <i class="material-icons">content_copy</i>
                            </button>
                            <button class="like-btn" title="Like">
                                <i class="material-icons">thumb_up</i>
                            </button>
                            <button class="dislike-btn" title="Dislike">
                                <i class="material-icons">thumb_down</i>
                            </button>
                            <button class="share-btn" title="Share">
                                <i class="material-icons">share</i>
                            </button>
                        </div>
                    ` : ''}
                `;
                chatMessages.appendChild(messageElement);
            });
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Add event listeners for message options
            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const text = btn.closest('.message').querySelector('div').textContent;
                    navigator.clipboard.writeText(text).then(() => {
                        showTemporaryMessage('Copied to clipboard!');
                    });
                });
            });
        }

        // Render suggestions
        function renderSuggestions() {
            suggestions.innerHTML = '';
            mockSuggestions.forEach(suggestion => {
                const suggestionChip = document.createElement('div');
                suggestionChip.className = 'suggestion-chip';
                suggestionChip.textContent = suggestion;
                suggestionChip.addEventListener('click', () => {
                    messageInput.value = suggestion;
                    messageInput.focus();
                });
                suggestions.appendChild(suggestionChip);
            });
        }

        // Create new chat
        function createNewChat() {
            const chatId = 'chat' + (chats.length + 1);
            const newChat = {
                id: chatId,
                title: 'New Chat',
                messages: []
            };
            
            chats.push(newChat);
            renderChatList();
            setCurrentChat(chatId);
        }

        // Rename chat
        function renameChat(chatId) {
            const chat = chats.find(c => c.id === chatId);
            if (chat) {
                const newTitle = prompt('Enter new chat title:', chat.title);
                if (newTitle && newTitle.trim()) {
                    chat.title = newTitle.trim();
                    renderChatList();
                    if (currentChatId === chatId) {
                        chatTitle.textContent = chat.title;
                    }
                }
            }
        }

        // Delete chat
        function deleteChat(chatId) {
            if (confirm('Are you sure you want to delete this chat?')) {
                chats = chats.filter(c => c.id !== chatId);
                if (currentChatId === chatId) {
                    if (chats.length > 0) {
                        setCurrentChat(chats[0].id);
                    } else {
                        createNewChat();
                    }
                }
                renderChatList();
            }
        }

        // Send message
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            const chat = chats.find(c => c.id === currentChatId);
            if (!chat) return;

            // Add user message
            const userMessage = {
                id: 'msg' + Date.now(),
                type: 'user',
                content: message,
                timestamp: new Date().toLocaleString()
            };
            chat.messages.push(userMessage);
            renderMessages(chat.messages);

            // Clear input
            messageInput.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Simulate AI response after delay
            setTimeout(() => {
                hideTypingIndicator();
                
                // Generate AI response
                const aiResponse = generateAIResponse(message);
                const aiMessage = {
                    id: 'msg' + Date.now(),
                    type: 'ai',
                    content: aiResponse,
                    timestamp: new Date().toLocaleString(),
                    options: ['regenerate', 'copy', 'like', 'dislike']
                };
                chat.messages.push(aiMessage);
                renderMessages(chat.messages);

                // Auto-rename chat if it's still "New Chat"
                if (chat.title === 'New Chat' && chat.messages.length >= 2) {
                    autoRenameChat(chat);
                }
            }, 2000);
        }

        // Show typing indicator
        function showTypingIndicator() {
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator';
            typingIndicator.id = 'typingIndicator';
            typingIndicator.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatMessages.appendChild(typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Hide typing indicator
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Generate AI response (mock)
        function generateAIResponse(userMessage) {
            // Simple mock responses based on keywords
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('photosynthesis')) {
                return 'Photosynthesis is the process by which green plants use sunlight to synthesize foods from carbon dioxide and water. Photosynthesis in plants generally involves the green pigment chlorophyll and generates oxygen as a byproduct. This process is fundamental to life on Earth as it provides the primary source of energy for nearly all organisms.';
            } else if (lowerMessage.includes('gravity')) {
                return 'Gravity is a natural phenomenon by which all things with mass or energy—including planets, stars, galaxies, and even light—are brought toward one another. On Earth, gravity gives weight to physical objects, and the Moon\'s gravity causes the ocean tides. The gravitational attraction of the original gaseous matter present in the Universe caused it to begin coalescing and forming stars.';
            } else if (lowerMessage.includes('computer')) {
                return 'A computer is a machine that can be programmed to carry out sequences of arithmetic or logical operations automatically. Modern computers can perform generic sets of operations known as programs. These programs enable computers to perform a wide range of tasks, from simple calculations to complex simulations and artificial intelligence applications.';
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return 'Hello! I\'m Milli AI, your school assistant. How can I help you with your studies today? You can ask me about any subject - science, math, history, or anything else you\'re curious about!';
            } else {
                return `That's an interesting question about "${userMessage}". Let me explain it in a way that's easy to understand. [This is a simulated response - in a real app, this would connect to the Gemini API to get an actual AI-generated response based on your question.]`;
            }
        }

        // Auto-rename chat based on conversation
        function autoRenameChat(chat) {
            if (chat.messages.length >= 2) {
                const firstUserMessage = chat.messages.find(m => m.type === 'user');
                if (firstUserMessage) {
                    // Extract keywords for title
                    let title = firstUserMessage.content.substring(0, 30);
                    if (title.length === 30) title += '...';
                    chat.title = title;
                    renderChatList();
                    if (currentChatId === chat.id) {
                        chatTitle.textContent = chat.title;
                    }
                }
            }
        }

        // Show notification panel
        function showNotificationPanel() {
            notificationPanel.style.display = 'flex';
        }

        // Hide notification panel
        function hideNotificationPanel() {
            notificationPanel.style.display = 'none';
        }

        // Show settings panel
        function showSettingsPanel() {
            settingsPanel.classList.add('active');
        }

        // Hide settings panel
        function hideSettingsPanel() {
            settingsPanel.classList.remove('active');
        }

        // Toggle dark mode
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            if (isDarkMode) {
                document.body.classList.add('dark-theme');
                themeToggle.innerHTML = '<i class="material-icons">light_mode</i>';
                darkModeToggle.checked = true;
            } else {
                document.body.classList.remove('dark-theme');
                themeToggle.innerHTML = '<i class="material-icons">dark_mode</i>';
                darkModeToggle.checked = false;
            }
        }

        // Switch language
        function switchLanguage(lang) {
            currentLanguage = lang;
            if (lang === 'en') {
                englishBtn.classList.add('active');
                hindiBtn.classList.remove('active');
                // In a real app, this would load English translations
                document.title = 'Milli AI - School Assistant';
            } else {
                hindiBtn.classList.add('active');
                englishBtn.classList.remove('active');
                // In a real app, this would load Hindi translations
                document.title = 'मिल्ली एआई - स्कूल सहायक';
            }
        }

        // Check maintenance mode (mock)
        function checkMaintenanceMode() {
            // In a real app, this would check Firebase for maintenance status
            // For demo purposes, we'll leave it off
            isMaintenanceMode = false;
            if (isMaintenanceMode) {
                maintenanceScreen.style.display = 'flex';
            } else {
                maintenanceScreen.style.display = 'none';
            }
        }

        // Simulate notifications
        function simulateNotifications() {
            // Add a sample notification
            const notification = {
                id: 'notif1',
                title: 'New Feature Available!',
                message: 'Image generation is now available. Try asking for diagrams or illustrations.',
                time: '2 minutes ago',
                unread: true
            };
            notifications.push(notification);
            renderNotifications();
        }

        // Render notifications
        function renderNotifications() {
            const notificationList = document.getElementById('notificationList');
            notificationList.innerHTML = '';
            
            notifications.forEach(notif => {
                const notifElement = document.createElement('div');
                notifElement.className = `notification-item ${notif.unread ? 'unread' : ''}`;
                notifElement.innerHTML = `
                    <h4>${notif.title}</h4>
                    <p>${notif.message}</p>
                    <small>${notif.time}</small>
                `;
                notificationList.appendChild(notifElement);
            });

            // Update notification badge
            const unreadCount = notifications.filter(n => n.unread).length;
            if (unreadCount > 0) {
                notificationBadge.textContent = unreadCount;
                notificationBadge.style.display = 'flex';
            } else {
                notificationBadge.style.display = 'none';
            }
        }

        // Show temporary message
        function showTemporaryMessage(message) {
            const tempMessage = document.createElement('div');
            tempMessage.style.position = 'fixed';
            tempMessage.style.top = '20px';
            tempMessage.style.left = '50%';
            tempMessage.style.transform = 'translateX(-50%)';
            tempMessage.style.backgroundColor = 'var(--success-color)';
            tempMessage.style.color = 'white';
            tempMessage.style.padding = '12px 24px';
            tempMessage.style.borderRadius = '8px';
            tempMessage.style.zIndex = '10000';
            tempMessage.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            tempMessage.textContent = message;
            document.body.appendChild(tempMessage);

            setTimeout(() => {
                tempMessage.style.opacity = '0';
                tempMessage.style.transition = 'opacity 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(tempMessage);
                }, 300);
            }, 3000);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Theme toggle
            themeToggle.addEventListener('click', toggleDarkMode);
            darkModeToggle.addEventListener('change', toggleDarkMode);

            // Menu button
            menuButton.addEventListener('click', showSettingsPanel);

            // New chat button
            newChatBtn.addEventListener('click', createNewChat);

            // Send message
            sendButton.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Voice input
            micButton.addEventListener('click', () => {
                showTemporaryMessage('Voice input not available in demo');
            });

            // File upload
            fileButton.addEventListener('click', () => {
                showTemporaryMessage('File upload not available in demo');
            });

            // Image generation
            imageButton.addEventListener('click', () => {
                showTemporaryMessage('Image generation would connect to Stable Horde API in real app');
                
                // Simulate image generation
                const userMessage = {
                    id: 'msg' + Date.now(),
                    type: 'user',
                    content: 'Generate an image of the solar system',
                    timestamp: new Date().toLocaleString()
                };
                
                const chat = chats.find(c => c.id === currentChatId);
                if (chat) {
                    chat.messages.push(userMessage);
                    renderMessages(chat.messages);
                    
                    showTypingIndicator();
                    
                    setTimeout(() => {
                        hideTypingIndicator();
                        
                        const aiMessage = {
                            id: 'msg' + Date.now(),
                            type: 'ai',
                            content: 'Here is an image of the solar system:',
                            timestamp: new Date().toLocaleString(),
                            options: ['regenerate', 'copy', 'like', 'dislike']
                        };
                        chat.messages.push(aiMessage);
                        renderMessages(chat.messages);
                        
                        // Add image gallery
                        const imageGallery = document.createElement('div');
                        imageGallery.className = 'image-gallery';
                        imageGallery.innerHTML = `
                            <div class="image-item">
                                <img src="https://placehold.co/300x300/4338ca/white?text=Solar+System" alt="Solar System">
                                <div class="image-actions">
                                    <button class="download-btn" title="Download">
                                        <i class="material-icons">download</i>
                                    </button>
                                    <button class="share-btn" title="Share">
                                        <i class="material-icons">share</i>
                                    </button>
                                </div>
                            </div>
                        `;
                        chatMessages.appendChild(imageGallery);
                        
                        // Add event listeners for image actions
                        document.querySelectorAll('.download-btn').forEach(btn => {
                            btn.addEventListener('click', () => {
                                showTemporaryMessage('Image downloaded!');
                            });
                        });
                    }, 3000);
                }
            });

            // Notification panel
            notificationNav.addEventListener('click', (e) => {
                e.preventDefault();
                showNotificationPanel();
            });
            notificationClose.addEventListener('click', hideNotificationPanel);

            // Settings panel
            settingsNav.addEventListener('click', (e) => {
                e.preventDefault();
                showSettingsPanel();
            });
            settingsClose.addEventListener('click', hideSettingsPanel);

            // Language switch
            englishBtn.addEventListener('click', () => switchLanguage('en'));
            hindiBtn.addEventListener('click', () => switchLanguage('hi'));

            // About sections
            document.querySelectorAll('.settings-option').forEach(option => {
                if (option.querySelector('.settings-label').textContent === 'About Developer') {
                    option.addEventListener('click', showAboutDeveloper);
                } else if (option.querySelector('.settings-label').textContent === 'About School') {
                    option.addEventListener('click', showAboutSchool);
                } else if (option.querySelector('.settings-label').textContent === 'Terms & Conditions') {
                    option.addEventListener('click', showTerms);
                } else if (option.querySelector('.settings-label').textContent === 'Logout') {
                    option.addEventListener('click', logout);
                }
            });
        }

        // Show about developer
        function showAboutDeveloper() {
            alert(`
Developer Information:
Name: Abutalha
Class: 6, Student of MKPS Balrampur
Contact: 9839469669

Milli AI has been developed by Abutalha, a young visionary student of class 6. This project reflects innovation, future learning, and creativity.
            `);
        }

        // Show about school
        function showAboutSchool() {
            alert(`
School Information:
Name: Milli Karwaan Public School, Balrampur (MKPS)
Address: Baluha Police Chowki, Balrampur (Uttar Pradesh)
Contact: 9758919151

Motto: "Education for the future, powered by AI."
            `);
        }

        // Show terms and conditions
        function showTerms() {
            alert(`
Terms & Conditions:

1. Milli AI is an educational assistant designed to help students with their studies.
2. The AI responses are for educational purposes only.
3. Do not share personal information with the AI.
4. The school and developer are not responsible for any misuse of the application.
5. Content generated by AI may not always be 100% accurate - verify with your teachers.
6. By using this application, you agree to these terms and conditions.
            `);
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // In a real app, this would handle Firebase logout
                showTemporaryMessage('Logged out successfully!');
                // Redirect to login page or reset app state
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
